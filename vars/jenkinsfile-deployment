pipeline {
    
    agent{
        label = "Ansible"
    }
    parameters {
         choice(name: 'ENV', choices: ['dev', 'prod',], description: 'Pick the environement'),
        string(name: 'COMPONENT', defaultValue: ' ', description: 'Which env to deploy?'),
        string(name: 'VERSION', defaultValue: ' ', description: 'Which version component to deploy?')
    }

    stages{
        stage('find the server') {
            when {
                environment name: 'ENV', value: 'dev'
            }
            steps {
                sh ' echo ansible-playbook '
            }
        stage('deploying to prod env') {
            when {
                environment name: 'ENV', value: 'prod'
            }
            steps {
                sh ' echo ansible-playbook '
            }
        }
        }
    }
}